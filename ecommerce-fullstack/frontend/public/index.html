<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="Modern E-commerce Store" />
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
  <title>E-commerce Store</title>
  
  <!-- Принудительные стили для адаптации под темы -->
  <style>    /* Глобальные стили для светлой темы */
    .form-group label,
    .checkbox-label,
    .login-form-wrapper h1,
    .register-form-wrapper h1,
    .forgot-password-wrapper h1,
    .reset-password-wrapper h1,
    .checkout-header h2,
    .address-form h3,
    .payment-form h3,
    .confirmation h3,
    .order-summary h4 {
      color: #2d3748 !important;
      font-weight: 500 !important;
    }
      /* Стили для темной темы */
    @media (prefers-color-scheme: dark) {
      .form-group label,
      .login-form-wrapper h1,
      .register-form-wrapper h1,
      .forgot-password-wrapper h1,
      .reset-password-wrapper h1,
      .checkout-header h2,
      .address-form h3,
      .payment-form h3,
      .confirmation h3,
      .order-summary h4 {
        color: #ffffff !important;
        font-weight: 600 !important;
        text-shadow: 0 0 1px rgba(255,255,255,0.3) !important;
      }
      
      .checkbox-label {
        color: #e2e8f0 !important;
        font-weight: 400 !important;
        text-shadow: 0 0 1px rgba(255,255,255,0.2) !important;
      }
    }
    
    /* Дополнительные селекторы для максимальной совместимости */
    body[data-theme="dark"] .form-group label,
    html[data-theme="dark"] .form-group label,
    .dark .form-group label {
      color: #ffffff !important;
      font-weight: 600 !important;
      text-shadow: 0 0 1px rgba(255,255,255,0.3) !important;
    }
    
    body[data-theme="dark"] .checkbox-label,
    html[data-theme="dark"] .checkbox-label,
    .dark .checkbox-label {
      color: #e2e8f0 !important;
      font-weight: 400 !important;
      text-shadow: 0 0 1px rgba(255,255,255,0.2) !important;
    }
      /* Принудительные стили для заголовков в темной теме */
    body[data-theme="dark"] .login-form-wrapper h1,
    body[data-theme="dark"] .register-form-wrapper h1,
    body[data-theme="dark"] .forgot-password-wrapper h1,
    body[data-theme="dark"] .reset-password-wrapper h1,
    body[data-theme="dark"] .checkout-header h2,
    body[data-theme="dark"] .address-form h3,
    body[data-theme="dark"] .payment-form h3,
    body[data-theme="dark"] .confirmation h3,
    body[data-theme="dark"] .order-summary h4,
    html[data-theme="dark"] .login-form-wrapper h1,
    html[data-theme="dark"] .register-form-wrapper h1,
    html[data-theme="dark"] .forgot-password-wrapper h1,
    html[data-theme="dark"] .reset-password-wrapper h1,
    html[data-theme="dark"] .checkout-header h2,
    html[data-theme="dark"] .address-form h3,
    html[data-theme="dark"] .payment-form h3,
    html[data-theme="dark"] .confirmation h3,
    html[data-theme="dark"] .order-summary h4,
    .dark .login-form-wrapper h1,
    .dark .register-form-wrapper h1,
    .dark .forgot-password-wrapper h1,
    .dark .reset-password-wrapper h1,
    .dark .checkout-header h2,
    .dark .address-form h3,
    .dark .payment-form h3,
    .dark .confirmation h3,
    .dark .order-summary h4 {
      color: #ffffff !important;
      text-shadow: 0 0 1px rgba(255,255,255,0.3) !important;
    }
      /* Стили для светлой темы */
    body[data-theme="light"] .form-group label,
    body[data-theme="light"] .checkbox-label,
    body[data-theme="light"] .login-form-wrapper h1,
    body[data-theme="light"] .register-form-wrapper h1,
    body[data-theme="light"] .forgot-password-wrapper h1,
    body[data-theme="light"] .reset-password-wrapper h1,
    body[data-theme="light"] .checkout-header h2,
    body[data-theme="light"] .address-form h3,
    body[data-theme="light"] .payment-form h3,
    body[data-theme="light"] .confirmation h3,
    body[data-theme="light"] .order-summary h4,
    html[data-theme="light"] .form-group label,
    html[data-theme="light"] .checkbox-label,
    html[data-theme="light"] .login-form-wrapper h1,
    html[data-theme="light"] .register-form-wrapper h1,
    html[data-theme="light"] .forgot-password-wrapper h1,
    html[data-theme="light"] .reset-password-wrapper h1,
    html[data-theme="light"] .checkout-header h2,
    html[data-theme="light"] .address-form h3,
    html[data-theme="light"] .payment-form h3,
    html[data-theme="light"] .confirmation h3,
    html[data-theme="light"] .order-summary h4,
    .light .form-group label,
    .light .checkbox-label,
    .light .login-form-wrapper h1,
    .light .register-form-wrapper h1,
    .light .forgot-password-wrapper h1,
    .light .reset-password-wrapper h1,
    .light .checkout-header h2,
    .light .address-form h3,
    .light .payment-form h3,
    .light .confirmation h3,
    .light .order-summary h4 {
      color: #2d3748 !important;
      font-weight: 500 !important;
      text-shadow: none !important;
    }
  </style>
</head>
<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>
  
  <script>
    // Универсальная функция для адаптации стилей под тему
    function adaptToTheme() {
      const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches ||
                     document.documentElement.getAttribute('data-theme') === 'dark' ||
                     document.body.getAttribute('data-theme') === 'dark' ||
                     document.documentElement.classList.contains('dark') ||
                     document.body.classList.contains('dark');
        // Селекторы для всех элементов форм
      const labelSelectors = [
        '.form-group label',
        '.login-form-wrapper .form-group label',
        '.register-form-wrapper .form-group label',
        '.forgot-password-wrapper .form-group label',
        '.reset-password-wrapper .form-group label',
        '.login-container .form-group label',
        '.register-container .form-group label',
        '.forgot-password-container .form-group label',
        '.reset-password-container .form-group label',
        '.checkout-modal .form-group label',
        '.checkout-content .form-group label'
      ];
      
      const checkboxSelectors = [
        '.checkbox-label',
        '.login-form-wrapper .checkbox-label',
        '.register-form-wrapper .checkbox-label',
        '.forgot-password-wrapper .checkbox-label',
        '.reset-password-wrapper .checkbox-label'
      ];
        const headingSelectors = [
        '.login-form-wrapper h1',
        '.register-form-wrapper h1',
        '.forgot-password-wrapper h1',
        '.reset-password-wrapper h1',
        '.checkout-header h2',
        '.address-form h3',
        '.payment-form h3',
        '.confirmation h3',
        '.order-summary h4'
      ];
      
      // Применение стилей для лейблов
      labelSelectors.forEach(selector => {
        const elements = document.querySelectorAll(selector);
        elements.forEach(el => {
          if (isDark) {
            el.style.color = '#ffffff';
            el.style.fontWeight = '600';
            el.style.textShadow = '0 0 1px rgba(255,255,255,0.3)';
          } else {
            el.style.color = '#2d3748';
            el.style.fontWeight = '500';
            el.style.textShadow = 'none';
          }
        });
      });
      
      // Применение стилей для чекбоксов
      checkboxSelectors.forEach(selector => {
        const elements = document.querySelectorAll(selector);
        elements.forEach(el => {
          if (isDark) {
            el.style.color = '#e2e8f0';
            el.style.fontWeight = '400';
            el.style.textShadow = '0 0 1px rgba(255,255,255,0.2)';
          } else {
            el.style.color = '#2d3748';
            el.style.fontWeight = '400';
            el.style.textShadow = 'none';
          }
        });
      });
      
      // Применение стилей для заголовков
      headingSelectors.forEach(selector => {
        const elements = document.querySelectorAll(selector);
        elements.forEach(el => {
          if (isDark) {
            el.style.color = '#ffffff';
            el.style.textShadow = '0 0 1px rgba(255,255,255,0.3)';
          } else {
            el.style.color = '#2d3748';
            el.style.textShadow = 'none';
          }
        });
      });
    }
    
    // Запуск при загрузке DOM
    document.addEventListener('DOMContentLoaded', adaptToTheme);
    
    // Наблюдение за изменениями темы
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', adaptToTheme);
    
    // Наблюдение за изменениями в DOM
    const observer = new MutationObserver(function(mutations) {
      let shouldUpdate = false;
      mutations.forEach(function(mutation) {
        if (mutation.type === 'childList' || 
            mutation.type === 'attributes' && 
            (mutation.attributeName === 'data-theme' || 
             mutation.attributeName === 'class')) {
          shouldUpdate = true;
        }
      });
      if (shouldUpdate) {
        setTimeout(adaptToTheme, 100);
      }
    });
    
    observer.observe(document.documentElement, {
      childList: true,
      subtree: true,
      attributes: true,
      attributeFilter: ['data-theme', 'class']
    });
    
    observer.observe(document.body, {
      childList: true,
      subtree: true,
      attributes: true,
      attributeFilter: ['data-theme', 'class']
    });
    
    // Периодическая проверка каждые 2 секунды
    setInterval(adaptToTheme, 2000);
    
    // Дополнительная проверка при фокусе окна
    window.addEventListener('focus', adaptToTheme);
    
    // Проверка при изменении размера окна
    window.addEventListener('resize', adaptToTheme);
  </script>
</body>
</html>
